<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-1TCWMZ52LN"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-1TCWMZ52LN');
</script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>台灣兒童生長曲線 | 身高 體重 BMI 目標身高 計算機</title>
  <meta name="description" content="台灣本土資料的兒童生長曲線計算器，輸入身高體重與生日，即可得出身體質量指數(BMI)、百分位與預估成年身高。">
  <meta name="keywords" content="生長曲線計算機,BMI,兒童身高,身高預測,吳啓銘,台灣兒童,生長百分位,中醫博士">
  <meta name="author" content="吳啓銘 仨寶爸中醫博士">
  <meta property="og:title" content="台灣兒童生長曲線小幫手">
  <meta property="og:description" content="台灣本土資料，可以用來計算兒童生長體重的生長曲線位置">
  <meta property="og:image" content="https://chimungwu.github.io/Growthchart/ICON1.png">
  <meta property="og:url" content="https://chimungwu.github.io/Growthchart/">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="zh_TW">

  <link rel="icon" href="/Growthchart/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="/Growthchart/apple-touch-icon.png">
  <link rel="manifest" href="./manifest.json">
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "台灣兒童生長曲線小幫手",
    "description": "依據台灣本土資料，計算兒童身高體重百分位與BMI值，並預測成年身高，適合家長與醫師參考。",
    "url": "https://chimungwu.github.io/Growthchart/",
    "applicationCategory": "HealthApplication",
    "operatingSystem": "All",
    "author": {
      "@type": "Person",
      "name": "吳啓銘"
    }
  }
  </script>
<style>
  body {
    background-color: #FFEFDB;
  }
</style>
</head>
<body style="text-align: center; font-size: 1.1em;">
<h1 style="display: none;">台灣兒童｜生長曲線｜BMI 目標身高 計算機</h1>
<div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v20.0" nonce="LJsi0rkZ"></script>
<br>
<div id="resultsContainer" style="
    font-family: 'Arial', sans-serif;
    color: #333;  /* 更深的字體顏色 */
    font-size: 1.1em;
    font-weight: bold;  
    background-color: #c8daff;  /* 較淺的背景顏色 */
    padding: 10px;
    margin: 0 auto;  /* 將左右外邊距設為自動，使其水平置中 */
    width: 90%; /* 使其寬度擴展至父元素的最大寬度 */
    border: 2px solid #6699cc;  /* 協調的邊框顏色 */
    border-radius: 5px;  /* 圓角 */
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    max-width: 320px;
    text-align: center;
    cursor: pointer;  /* Make it look clickable */
    ">
    <p style="margin: 0; color: navy; font-size: 1.4em;">生長曲線小幫手</p>
    <p id="AgeResult" style="margin: 0;"></p>
    <p id="result" style="margin: 0;"></p>
    <p id="BMIResult" style="margin: 0;"></p>
    <p id="AgeMedian" style="margin:8px 0; display:none; color:#444; border-top:1px solid #aaa; border-bottom:1px solid #aaa; padding:6px 0;"></p>
    <p id="InheritedResult" style="margin: 0;"></p>
    <p id="currentDate" style="margin: 0;"></p>
    <button id="copyButton" style="margin-top: 10px;">複製結果</button>
    <button id="exportButton" style="margin-top: 10px;">匯出CSV</button>
    <button id="medianButton" style="margin-top: 10px;">顯示50百分位</button>
</div>
<textarea id="copyTextArea" style="position: absolute; left: -9999px;"></textarea>
<br>
<p style='text-align: center; '>
程式維護：<a href="https://drwu.carrd.co" target="_blank">仨寶爸中醫博士 吳啓銘</a>
<br>
</p>
<hr>
<label>&nbsp;性&nbsp;&nbsp;&nbsp;別: </label>
<span style="margin-left: 10px;">
<input checked="" id="boy" name="gender" type="radio" value="boy" onchange="handleGenderChange();"/>
<label for="boy">男孩</label>
</span>
<span style="margin-left: 10px;">
    <input id="girl" name="gender" type="radio" value="girl" onchange="handleGenderChange();"/>
    <label for="girl">女孩</label>
</span>
&nbsp;&nbsp;&nbsp;&nbsp;<button id="refreshBtn" onclick="refreshPage()" style="background-color: transparent; border: none; cursor: pointer;">
    <img src="refresh.png" alt="Refresh" width="18" height="18" style="vertical-align: middle;">
</button>
    
<br/><br/>

<style>
    .centered-text-input {
        text-align: center;
    }
</style>

<label for="age">生日 / 年齡: </label>
<input class="centered-text-input" id="birthdate" placeholder="輸入YYYYMMDD 或 年齡" type="text"/>
<input id="age" max="18.5" min="0" step="0.5" type="hidden"/>
<span id="AgeResult"></span>
<br/><br/>
<label for="height">身高 (公分):</label>
<input class="centered-text-input" id="height" step="0.1" type="number" oninput="executeAllFunctions()"/><br/><br/>
<label for="weight">體重 (公斤):</label>
<input class="centered-text-input" id="weight" step="0.1" type="number" oninput="executeAllFunctions()"/><br/><br/>
<label for="fatherHeight">爸爸的身高: </label>
<input class="centered-text-input" id="fatherHeight" step="0.1" type="number" oninput="executeAllFunctions()"/><br/><br/>
<label for="motherHeight">媽媽的身高: </label>
<input class="centered-text-input" id="motherHeight" step="0.1" type="number" oninput="executeAllFunctions()"/><br/><br/>
<hr>
<div id="addToHomeScreen" style="display: none;">
    <p>想要更方便地訪問這個網站嗎？</p>
    <p>1. 請先以系統瀏覽器開啟，點擊下方的分享按鈕 <img src="path_to_share_icon_image.png" alt="分享圖標" style="width: 18px; height: 18px;"> 。</p>
    <p>2. 然後從彈出的選單中選擇「加入主畫面」。</p>
    <button onclick="closeAddToHomeScreen()">了解了</button>
</div>

<h2 style="text-align: left; color: #333; margin-top: 30px;">🧠 常見問題（Q&A）</h2>
<div style="text-align: left; color: #555; font-size: 1em; line-height: 1.8;">

  <h3>Q1：這個兒童生長曲線工具的資料來源是什麼？</h3>
  <p>A1：本工具所使用的身高與體重參考資料，引用自陳偉德醫師與張美惠醫師於 2010 年發表的台灣本土研究，該研究根據 WHO 標準制定新的兒童與青少年成長曲線：<br>
  👉 <a href="https://www.pediatr-neonatol.com/article/S1875-9572(10)60014-9/pdf" target="_blank">Chen W, Chang MH. Pediatr Neonatol. 2010 Apr;51(2):69-79.</a></p>

  <h3>Q2：BMI 百分位的標準是依據哪個單位的建議？</h3>
  <p>A2：BMI（身體質量指數）的百分位建議值，採用衛福部國健署於 102 年公告的台灣兒童與青少年體位判定參考值。</p>

  <h3>Q3：如何計算孩子未來的預估成年身高？</h3>
  <p>A3：本工具使用 Tanner 等學者提出的 Target Height 公式，透過父母的身高平均，推估孩子的潛在成年身高：<br>
  男孩：爸媽平均身高 + 6.5 ± 7.5 公分<br>
  女孩：爸媽平均身高 − 6.5 ± 6 公分<br>
  👉 <a href="https://adc.bmj.com/content/archdischild/45/244/755.full.pdf" target="_blank">J.M. Tanner et al., Arch Dis Child, 1970</a></p>

  <h3>Q4：這個線上工具適合哪些人使用？是否能當作醫療依據？</h3>
  <p>A4：本生長曲線小幫手主要提供給家長、中醫師、小兒科醫師與學校保健老師參考。可即時了解孩子在台灣同齡族群中的身高百分位、BMI 值與發育趨勢，也能預估成年目標身高。不過，所有數據僅供參考，若有疑問，請務必諮詢專業醫療人員或營養師。</p>

  <h3>Q5：這個工具的設計者是誰？</h3>
  <p>A5：本生長曲線工具由仨寶爸吳啓銘中醫博士設計，擁有二十年臨床經驗，專精於兒童轉骨、青春期發育與體質調理。現任台中南屯臻品中醫副院長，長期關注孩子的成長與健康議題，致力將中醫知識與現代科技結合，幫助更多家長用簡單直覺的方式了解孩子的發育狀況。</p>

  <p>🧾 程式版本：2025/09/04 ver.20</p>
</div>
  
<hr>
<div class="fb-page" data-href="https://www.facebook.com/profile.php?id=61557246475372" data-tabs="timeline" data-width="" data-height="" data-small-header="true" data-adapt-container-width="true" data-hide-cover="true" data-show-facepile="false"><blockquote cite="https://www.facebook.com/profile.php?id=61557246475372" class="fb-xfbml-parse-ignore"><a href="https://www.facebook.com/profile.php?id=61557246475372">仨寶爸中醫師吳啓銘</a></blockquote></div>
</body>
</html>

<script>
function refreshPage(){location.reload()}let deferredPrompt;function displayAddToHomeScreenPrompt(){isIphone()&&!isAddedToHomescreen()&&(document.getElementById("addToHomeScreen").style.display="block")}function closeAddToHomeScreen(){document.getElementById("addToHomeScreen").style.display="none"}function isIphone(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)}function isAddedToHomescreen(){return window.navigator.standalone}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/Growthchart/service-worker.js")}),window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),deferredPrompt=e}),document.getElementById("resultsContainer").addEventListener("click",()=>{deferredPrompt&&(deferredPrompt.prompt(),deferredPrompt.userChoice.then(e=>{"accepted"===e.outcome?console.log("用戶接受了提示"):console.log("用戶拒絕了提示"),deferredPrompt=null}))}),window.onload=function(){displayAddToHomeScreenPrompt()};const boyWeightData={Age:[0,.5,1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5,10,10.5,11,11.5,12,12.5,13,13.5,14,14.5,15,15.5,16,16.5,17,17.5,18,18.5]," 3rd":[2.5,6.4,7.8,8.9,9.8,10.7,11.4,12.2,12.9,13.6,14.3,15.3,16.3,17.4,18.4,19.4,20.3,21.2,22.1,23,24,25,26.3,27.6,29.3,30.5,32.8,35,38,41,43,45,46.8,48.5,49.3,50,50.3,50.5],"15th":[2.9,7.1,8.6,9.7,10.8,11.8,12.7,13.5,14.3,15.2,16,17.1,18.2,19.3,20.4,21.5,22.7,23.8,24.8,25.8,26.9,28,29.6,31.2,33.1,35,38,41,44,47,49,51,52,53,54,55,55,55],"25th":[3,7.4,9,10.1,11.3,12.3,13.2,14.1,15,15.9,16.7,17.9,19,20.2,21.3,22.5,23.8,25,26,27,28.4,29.8,31.4,33,35.2,37.3,40.7,44,46.8,49.5,51.3,53,54.1,55.1,56.1,57,57.5,58],"50th":[3.3,7.9,9.6,10.9,12.2,13.3,14.3,15.3,16.3,17.3,18.3,19.6,20.9,22.3,23.6,24.9,26.3,27.6,28.8,30,31.5,33,35.3,37.6,40.3,43,46.5,50,52.5,54.9,56.5,58,59,60,61,62,62.5,63],"75th":[3.7,8.5,10.4,11.8,13.1,14.4,15.6,16.7,17.8,19,20.1,21.6,23.2,24.7,26.3,27.8,29.6,31.4,32.7,34,36,38,40.8,43.5,46.5,49.5,53,56.4,58.7,61,62.5,64,65,66,66.6,67.2,67.6,68],"85th":[3.9,8.9,10.8,12.3,13.7,15,16.3,17.5,18.7,19.9,21.1,22.9,24.7,26.4,28.2,30,32.2,34.3,35.7,37,39.4,41.8,44.7,47.5,50.4,53.2,56.8,60.4,62.7,65,66.5,68,69,70,70,70,70.5,71],"97th":[4.3,9.7,11.8,13.5,15.1,16.6,18,19.4,20.9,22.3,23.8,26.5,29.2,32,34.7,37.4,40.2,42.3,44.3,45.6,48.6,51.6,54.8,58,61.5,65,68.5,72,74.3,76.6,77.6,78.5,79.3,80,80,80,80,80]},boyHeightData={Age:[0,.5,1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5,10,10.5,11,11.5,12,12.5,13,13.5,14,14.5,15,15.5,16,16.5,17,17.5,18,18.5]," 3rd":[46.3,63.6,71.3,77.2,82.1,85.5,89.1,92.4,95.4,98.4,101.2,103.9,106.5,109.2,111.8,114.5,117,119.5,121.8,124,126,128,130.5,133,135.6,138.2,141.9,145.5,149.3,153,155.5,158,159.3,160.5,160.9,161,161.5,162],"15th":[47.9,65.4,73.3,79.5,84.6,88.4,92.2,95.7,99,102.1,105.2,107.9,110.5,113.2,115.8,118.5,121.3,124,126,128,130.5,133,135.6,138.1,141.1,144,148.5,153,156.3,159.6,161.3,163,164,165,165.5,166,166,166],"25th":[48.6,66.2,74.1,80.4,85.8,89.6,93.6,97.2,100.5,103.7,106.8,109.5,112.3,115,117.8,120.5,123.3,126,128,130,132.5,135,137.8,140.5,143.8,147,151.5,156,159,162,163.5,165,166.2,167.3,167.7,168,168,168],"50th":[49.9,67.6,75.7,82.3,87.8,91.9,96.1,99.9,103.5,106.7,110,112.8,115.6,118.4,121.2,124,126.8,129.5,131.8,134,136.5,139,142,145,148.8,152.5,156.9,161.2,163.7,166.2,167.6,169,170,171,171.5,172,172,172],"75th":[51.2,69.1,77.4,84.1,89.9,94.2,98.6,102.5,106.2,109.6,113.1,116,118.9,121.7,124.6,127.5,130.3,133,135.5,138,140.5,143,146.7,150.4,154.2,158,162,166,168.3,170.5,171.8,173,173.8,174.5,174.8,175,175,175],"85th":[51.8,69.8,78.2,85.1,91,95.5,99.9,104,107.7,111.2,114.8,117.7,120.6,123.6,126.5,129.4,132.2,135,137.5,140,142.8,145.5,149.4,153.2,157.1,161,164.9,168.7,170.8,172.8,173.9,175,175.8,176.5,176.8,177,177.3,177.5],"97th":[53.4,71.6,80.2,87.3,93.6,98.3,103.1,107.3,111.2,115,118.7,121.8,124.9,128.1,131.2,134.3,137.2,140,142.5,145,148.3,151.5,156.1,160.7,164.4,168,171,174,176,178,179,180,180.5,181,181.5,182,182,182]},girlWeightData={Age:[0,.5,1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5,10,10.5,11,11.5,12,12.5,13,13.5,14,14.5,15,15.5,16,16.5,17,17.5,18,18.5]," 3rd":[2.4,5.8,7.1,8.2,9.2,10.1,11,11.8,12.5,13.2,14,14.9,15.9,16.8,17.8,18.7,19.6,20.4,21.5,22.5,23.8,25,26.5,28,29.8,31.5,33.5,35.5,37.1,38.6,39.3,40,40.5,41,41.5,42,42,42],"15th":[2.8,6.4,7.9,9,10.1,11.2,12.1,13.1,14,14.8,15.7,16.7,17.7,18.6,19.6,20.6,21.8,23,24,25,26.6,28.1,30.3,32.5,34.8,37,38.7,40.4,41.7,43,43.8,44.6,44.8,45,45.2,45.4,45.7,45.9],"25th":[2.9,6.7,8.2,9.4,10.6,11.7,12.7,13.7,14.7,15.6,16.5,17.5,18.5,19.6,20.6,21.6,22.8,24,25.3,26.5,28.3,30,32.5,35,37.1,39.1,40.9,42.6,43.8,45,45.7,46.3,46.7,47,47.2,47.3,47.3,47.3],"50th":[3.2,7.3,8.9,10.2,11.5,12.7,13.9,15,16.1,17.2,18.2,19.4,20.5,21.7,22.8,24,25.4,26.8,28.2,29.6,31.8,34,36.9,39.7,41.7,43.7,45.4,47,48.1,49.1,49.6,50,50.5,51,51,51,51,51],"75th":[3.6,7.9,9.7,11.1,12.5,13.8,15.1,16.4,17.7,18.9,20.2,21.5,22.8,24,25.3,26.6,28.4,30.1,32.1,34,36.7,39.4,42.2,45,47,49,50.5,52,53,54,54.5,55,55,55,55,55,55,55],"85th":[3.7,8.3,10.2,11.6,13.1,14.5,15.9,17.3,18.6,20,21.3,22.7,24.2,25.6,27.1,28.5,30.8,33,35,36.9,39.8,42.7,45.5,48.2,50.1,52,53.5,55,56,57,57.5,58,58,58,58,58,58,58],"97th":[4.2,9.2,11.3,13,14.6,16.2,17.8,19.5,21.1,22.8,24.4,26.5,28.6,30.8,32.9,35,37.8,40.5,42.8,45,47.3,49.6,52.7,55.8,57.8,59.7,61.2,62.7,63.9,65,65.5,66,66.2,66.4,66.7,67,67,67]},girlHeightData={Age:[0,.5,1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5,10,10.5,11,11.5,12,12.5,13,13.5,14,14.5,15,15.5,16,16.5,17,17.5,18,18.5]," 3rd":[45.6,61.5,69.2,75.2,80.3,84,87.9,91.4,94.6,97.6,100.5,103,105.5,108.1,110.6,113.1,115.7,118.3,120.7,123,125.8,128.5,131.8,135,137.9,140.8,143.2,145.5,146.8,148,148.5,149,149.5,150,150,150,150,150],"15th":[47.2,63.4,71.3,77.7,83.1,87,91.1,94.8,98.3,101.5,104.5,107.1,109.7,112.3,114.9,117.5,120.3,123,125.5,128,131,134,137.5,141,143.8,146.5,148.5,150.5,151.3,152,152.5,153,153.5,154,154,154,154,154],"25th":[47.9,64.2,72.3,78.7,84.2,88.3,92.5,96.3,99.8,103.1,106.2,108.8,111.3,113.9,116.4,119,122,125,127.5,130,133,136,139.8,143.5,146.3,149,150.7,152.4,153.2,154,154.5,155,155.3,155.5,155.8,156,156,156],"50th":[49.1,65.7,74,80.7,86.4,90.7,95.1,99,102.7,106.2,109.4,112.1,114.8,117.6,120.3,123,125.8,128.5,131.3,134,137.5,141,144.5,148,150.5,153,154.5,156,156.8,157.5,157.9,158.3,158.7,159,159.3,159.5,159.5,159.5],"75th":[50.4,67.3,75.8,82.7,88.6,93.1,97.6,101.8,105.6,109.2,112.6,115.3,118,120.8,123.5,126.2,129.2,132.2,135.4,138.5,142.3,146,149.4,152.7,154.9,157,158.4,159.7,160.4,161,161.5,162,162.3,162.5,162.8,163,163,163],"85th":[51.1,68.1,76.7,83.7,89.8,94.3,99,103.3,107.2,110.9,114.4,117.1,119.9,122.6,125.4,128.1,131.3,134.5,137.8,141,144.8,148.5,151.8,155,157,159,160.3,161.5,162.3,163,163.5,164,164.2,164.4,164.7,165,165,165],"97th":[52.7,70,78.9,86.2,92.5,97.3,102.2,106.7,110.8,114.7,118.4,121.3,124.2,127.2,130.1,133,136.5,140,143.5,147,150.8,154.5,157.3,160,161.8,163.5,164.8,166,167,167.9,168.2,168.5,168.8,169,169,169,169,169]},boyBMIData={Age:[2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5,10,10.5,11,11.5,12,12.5,13,13.5,14,14.5,15,15.5,16,16.5,17,17.5,18,18.5],underweight:[14.2,13.9,13.7,13.6,13.4,13.3,13.3,13.4,13.5,13.6,13.8,14,14.1,14.2,14.3,14.4,14.5,14.6,14.8,15,15.2,15.4,15.7,16,16.3,16.6,16.9,17.2,17.4,17.6,17.8,18,18.1,18.2],overweight:[17.4,17.2,17,16.8,16.7,16.7,16.7,16.7,16.9,17.3,17.9,18.6,19,19.3,19.5,19.7,20,20.3,20.7,21,21.3,21.5,21.9,22.2,22.5,22.7,22.9,23.1,23.3,23.4,23.5,23.6,23.7,23.7],obesity:[18.3,18,17.8,17.7,17.6,17.6,17.7,18,18.5,19.2,20.3,21.2,21.6,22,22.3,22.5,22.7,22.9,23.2,23.5,23.9,24.2,24.5,24.8,25,25.2,25.4,25.5,25.6,25.6,25.6,25.6,25.6]},girlBMIData={Age:[2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5,10,10.5,11,11.5,12,12.5,13,13.5,14,14.5,15,15.5,16,16.5,17,17.5,18,18.5],underweight:[13.7,13.6,13.5,13.3,13.2,13.1,13.1,13.1,13.1,13.2,13.4,13.7,13.8,13.9,14,14.1,14.3,14.4,14.7,14.9,15.2,15.4,15.7,16,16.3,16.5,16.7,16.9,17.1,17.2,17.3,17.3,17.3,17.3],overweight:[17.2,17,16.9,16.8,16.8,16.9,17,17,17.2,17.5,17.7,18,18.4,18.8,19.1,19.3,19.7,20.1,20.5,20.9,21.3,21.6,21.9,22.2,22.5,22.7,22.7,22.7,22.7,22.7,22.7,22.7,22.7,22.7],obesity:[18.1,17.9,17.8,17.8,17.9,18,18.1,18.3,18.8,19.2,19.6,20.3,20.7,21,21.3,21.6,22,22.3,22.7,23.1,23.5,23.9,24.3,24.6,24.9,25.1,25.2,25.3,25.3,25.3,25.3,25.3,25.3,25.3]};function handleGenderChange(){calculateAge(),executeAllFunctions()}function calculateAge(){const e=[31,28,31,30,31,30,31,31,30,31,30,31];let t=document.getElementById("birthdate").value.trim();if(!isNaN(t)&&t.length<7&&parseFloat(t)>=0&&parseFloat(t)<=18){const e=parseFloat(t);let n=document.getElementById("boy").checked?"男孩":"女孩";return document.getElementById("AgeResult").textContent=`${n} 年齡為 ${e.toFixed(1)}歲`,document.getElementById("age").value=e,void executeAllFunctions()}if(/^\d{8}$/.test(t)){let e=parseInt(t.substring(0,4),10),n=parseInt(t.substring(4,6),10),o=parseInt(t.substring(6,8),10);e<2e3&&(e+=1911),t=`${e}/${n}/${o}`}else if(/^\d{7}$/.test(t)){let e=parseInt(t.substring(0,3),10)+1911,n=parseInt(t.substring(3,5),10),o=parseInt(t.substring(5,7),10);t=`${e}/${n}/${o}`}if(isNaN(t)||t.includes("/")){let n=parseInt(t.split("/")[0]);n<1900&&(n+=1911);let o=parseInt(t.split("/")[1]),l=parseInt(t.split("/")[2]);if(e[1]=n%4!=0||n%100==0&&n%400!=0?28:29,o<1||o>12||l<1||l>e[o-1])return console.log("Month:",o,"Day:",l),void(document.getElementById("AgeResult").textContent="生日格式錯誤");birthdate=new Date(n,o-1,l)}else{const e=parseInt(t);if(e<0||e>18)return void(document.getElementById("AgeResult").textContent="年齡請輸入0-18歲！");birthdate=new Date((new Date).getFullYear()-e,0,1)}const n=new Date,o=Math.abs(n-birthdate),l=o,i=l/1e3,r=i/60,d=r/60,a=d/24,u=a/365.25;if(u>18)return void(document.getElementById("AgeResult").textContent="年齡請輸入0-18歲！");document.getElementById("age").value=u.toFixed(2);const c=document.querySelector('input[name="gender"]:checked').value,s="boy"===c?"男孩 ":"女孩 ",g=Math.floor(u);let m=12*(u-g);const h=Math.floor(m);let y=Math.floor((m-h)*e[h]);document.getElementById("AgeResult").textContent=s+"年齡為 "+g+"歲 "+h+" 個月又 "+y+" 天"}function interpolate_value(e,t,n,o,l){return o+(e-t)*(l-o)/(n-t)}function findClosestIndices(e,t){let n=0,o=t.length-1;for(;n<=o;){let l=Math.floor((n+o)/2);if(t[l]<e)n=l+1;else{if(!(t[l]>e))return[l,l];o=l-1}}return[o,n]}function find_bounding_values(e,t){let n=Object.keys(t);for(let o=1;o<n.length;o++)if(t[n[o]]>=e)return[n[o-1],n[o]];return[n[n.length-2],n[n.length-1]]}function formatPercentileDisplay(e,t){const n={3:"3rd",15:"15th",50:"50th",85:"85th",97:"97th"};return e<3?"低於百分之3":e>97?"超過百分之97":n[Math.round(e)]?n[Math.round(e)]:e.toFixed(1)+`&nbsp;(${t[0]}-${t[1]})`}function displayResults(){let e=document.querySelector('input[name="gender"]:checked').value,t=document.getElementById("age").value,n=parseFloat(document.getElementById("height").value),o=parseFloat(document.getElementById("weight").value);if(!t||""===t.trim())return void(document.getElementById("result").textContent="請輸入年齡");if(isNaN(n)||isNaN(o))return void(document.getElementById("result").textContent="");let l=parseFloat(t),i="girl"===e?girlHeightData:boyHeightData,r="girl"===e?girlWeightData:boyWeightData,d=findClosestIndices(l,i.Age),a={},u={};if(i.Age.includes(l)){let e=i.Age.indexOf(l);for(let t in i)"Age"!==t&&(a[t]=i[t][e],u[t]=r[t][e])}else for(let e in i)"Age"!==e&&(a[e]=interpolate_value(l,i.Age[d[0]],i.Age[d[1]],i[e][d[0]],i[e][d[1]]),u[e]=interpolate_value(l,r.Age[d[0]],r.Age[d[1]],r[e][d[0]],r[e][d[1]]));let c=find_bounding_values(n,a),s=find_bounding_values(o,u),g=interpolate_value(n,a[c[0]],a[c[1]],parseFloat(c[0]),parseFloat(c[1])),m=interpolate_value(o,u[s[0]],u[s[1]],parseFloat(s[0]),parseFloat(s[1])),h,y;h=g>97?`身高${n}cm；百分位超過97`:g<3?`身高${n}cm；百分位低於3`:`身高${n}cm；百分位${g.toFixed(1)}`,y=m>97?`體重${o}kg；百分位超過97`:m<3?`體重${o}kg；百分位低於3`:`體重${o}kg；百分位${m.toFixed(1)}`,document.getElementById("result").innerHTML=`${h}<br>${y}`}document.getElementById("birthdate").addEventListener("input",function(){calculateAge(),executeAllFunctions()});let isMedianShown=!1;function displayAgeP50(){const e=document.querySelector('input[name="gender"]:checked').value,t=document.getElementById("age").value,n=document.getElementById("AgeMedian");if(!t||""===t.trim())return n.style.display="none",void(n.textContent="");const o=parseFloat(t),l="girl"===e?girlHeightData:boyHeightData,i="girl"===e?girlWeightData:boyWeightData,r=findClosestIndices(o,l.Age);let d,a;if(l.Age.includes(o)){const e=l.Age.indexOf(o);d=l["50th"][e],a=i["50th"][e]}else{const e=l.Age[r[0]],t=l.Age[r[1]];d=interpolate_value(o,e,t,l["50th"][r[0]],l["50th"][r[1]]),a=interpolate_value(o,e,t,i["50th"][r[0]],i["50th"][r[1]])}n.innerHTML=`同年齡50百分位：<br>‧ 身高 ${d.toFixed(1)} cm<br>‧ 體重 ${a.toFixed(1)} kg`}function calculateInheritedHeight(){const e=document.querySelector('input[name="gender"]:checked').value,t=document.getElementById("fatherHeight").value,n=document.getElementById("motherHeight").value,o=document.getElementById("InheritedResult");if(!t||!n||isNaN(t)||isNaN(n))return void(o.innerText="");const l=parseFloat(t),i=parseFloat(n);let r=0,d=0;"boy"===e?(r=(l+i+13)/2,d=7.5):(r=(l+i-13)/2,d=6),o.innerHTML="預估目標身高為： "+r.toFixed(1)+" 公分<br>( "+(r-d).toFixed(1)+" 公分 - "+(r+d).toFixed(1)+" 公分 )"}function calculateBMI(e,t){return(e/Math.pow(t/100,2)).toFixed(2)}function interpolate(e,t,n,o,l){return o+(l-o)*(e-t)/(n-t)}function determineWeightCategory(e,t,n){const o="boy"===n?boyBMIData:girlBMIData,l=o.Age,i=o.underweight,r=o.overweight,d=o.obesity;let a=-1,u=-1;for(let e=0;e<l.length;e++)l[e]<=t&&(a=e),l[e]>=t&&-1===u&&(u=e);if(-1===a||-1===u)return"無法判斷";if(l[a]===t)return e<i[a]?"體重過輕":e>=i[a]&&e<r[a]?"體重適中":e>=r[a]&&e<d[a]?"體重過重":"肥胖";const c=interpolate(t,l[a],l[u],i[a],i[u]),s=interpolate(t,l[a],l[u],r[a],r[u]),g=interpolate(t,l[a],l[u],d[a],d[u]);return e<c?"體重過輕":e>=c&&e<s?"體重適中":e>=s&&e<g?"體重過重":"肥胖"}function displayBMIResult(){let e=document.getElementById("age").value,t=parseFloat(document.getElementById("height").value),n=parseFloat(document.getElementById("weight").value);const o=document.querySelector('input[name="gender"]:checked').value;if(!e||isNaN(t)||isNaN(n))return void(document.getElementById("BMIResult").textContent="請輸入完整資料以計算BMI");let l=parseFloat(e),i=calculateBMI(n,t),r=determineWeightCategory(i,l,o);document.getElementById("BMIResult").textContent=`BMI：${i} (${r})`}function executeAllFunctions(){displayResults(),calculateInheritedHeight(),displayBMIResult(),isMedianShown&&displayAgeP50()}function copyResults(){const e=document.getElementById("AgeResult").innerText,t=document.getElementById("result").innerText,n=document.getElementById("BMIResult").innerText,o=document.getElementById("InheritedResult").innerText,l=document.getElementById("currentDate").innerText,i=`${e}\n${t}\n${n}\n${o}\n${l}`;if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(i).then(function(){alert("計算結果已複製到剪貼簿")},function(e){alert("無法複製")});else{const e=document.getElementById("copyTextArea");e.value=i,e.style.display="block",e.select(),e.setSelectionRange(0,99999);try{const e=document.execCommand("copy"),t=e?"計算結果已複製到剪貼簿":"無法複製";alert(t)}catch(e){alert("無法複製")}e.style.display="none"}}function displayCurrentDate(){const e=document.getElementById("currentDate"),t=new Date,n={year:"numeric",month:"long",day:"numeric"},o=t.toLocaleDateString("zh-TW",n);e.textContent=`目前日期：${o}`}document.getElementById("medianButton").addEventListener("click",()=>{const e=document.getElementById("AgeMedian");isMedianShown?(e.style.display="none",document.getElementById("medianButton").textContent="顯示50百分位",isMedianShown=!1):(displayAgeP50(),e.style.display="block",document.getElementById("medianButton").textContent="隱藏50百分位",isMedianShown=!0)}),document.getElementById("copyButton").addEventListener("click",copyResults),document.getElementById("exportButton").addEventListener("click",function(){const e=document.getElementById("AgeResult").textContent,t=document.getElementById("height").value,n=document.getElementById("weight").value,o=document.getElementById("BMIResult").textContent,l="\ufeff日期,年齡,身高 (公分),體重 (公斤),BMI 結果\n"+(new Date).toLocaleDateString()+","+e+","+t+","+n+","+o,i=new Date,r=i.getFullYear(),d=(""+(i.getMonth()+1)).padStart(2,"0"),a=i.getDate().toString().padStart(2,"0"),u=`${r}${d}${a}`,c=navigator.userAgent.match(/(iPad|iPhone|iPod)/i);if(c){const e="data:text/csv;charset=utf-8,"+encodeURIComponent(l),t=window.open();t.document.write("<pre>"+l+"</pre>"),t.document.title=`成長追蹤_${u}.csv`}else{const e=new Blob([l],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(e),n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download",`成長追蹤_${u}.csv`),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)}}),window.onload=function(){displayAddToHomeScreenPrompt(),displayCurrentDate()};
</script>
